# Лабораторная 1 (со звездочкой)
## Задание

Попробовать взломать nginx другой команды. Проверить минимум три уязвимости - например path traversal, перебор страниц через ffuf и/или любые другие на ваш выбор.
Взлом считается успешным, если вы попали туда, куда не планировалось попадать пользователю, даже если там ничего нет. Успешность взлома не влияет на оценку лаб обеих команд. 
В отчет приложить скрины попыток взлома, описание уязвимостей, на которые проверяли и итог - успешен взлом или нет.
Тк открывать такие нжинксы в интернет не лучшая идея, для решения лабы предлагаю либо встретиться с другой командой в одном помещении и поднять локальную сеть, либо запустить у себя нжинкс с их конфигом. Но при этом настройки нжинкс со стороны админа и изменения в конфиге считаться попыткой взлома не будут.
Просьба договориться с другими командами кто кого ломает. Взлом нжинкса одной команды не должен фигурировать в отчетах больше двух раз.

## Ход работы

Для выполнения работы был взят nginx команды №6.

![{3CD518A9-92E7-4504-A95C-31D010ADDD67}](https://github.com/user-attachments/assets/f4e5db40-b3bf-46f1-8b8f-844fe6fd1bc7)

### Path-Traversal

Первой была рассмотрена уязвимость Path-Traversal.
В конфиг-файле была замечена ошибка - отсутствие слэша в `location /styles`. Это может позволить злоумышленнику использовать относительные пути для доступа к файлам вне корневой директории веб-приложения.

```
location /styles {
        alias "C:/Users/Ангелина/Downloads/nginx-1.27.1/nginx-1.27.1/html/styles/"; 
        }
```
Например, нам удалось достучаться до дефолтной страницы index.html nginx-а, которая находится в каталоге выше styles.

![image](https://github.com/user-attachments/assets/6f60f1cd-536d-4f16-a73f-00517e5a1663)

Чтобы недопустить такой ситуации, стоит исправить конфиг следующим образом:

```
location /styles/ {
        alias "C:/Users/Ангелина/Downloads/nginx-1.27.1/nginx-1.27.1/html/styles/"; 
        }
```

### ffuf

Далее мы попробовали осуществить фаззинг каталогов с помощью ffuf. Для этого было необходимо скачать ffuf, а также загрузить специальные словари, по которым будет осуществляться перебор.

```
git clone --depth 1 https://github.com/danielmiessler/SecLists.git
```
Сначала мы попробовали поискать скрытые каталоги и файлы. На скриншоте представлен результат сканирования.

![image](https://github.com/user-attachments/assets/48b4ac50-d666-4d8a-86e6-8057b34faeeb)

Можно увидеть, что существует директория styles. Просмотреть содержимое директории невозможно, так как на это нет прав доступа.

![image](https://github.com/user-attachments/assets/82f8dc6c-173a-4c74-8e7b-8b2cd187f6eb)

Так как каталог называется `styles`, мы решили проверить директорию на наличие .css-файлов.

![{09AFC753-0152-4057-8C62-F205F491AECC}](https://github.com/user-attachments/assets/63c09f8c-b98c-44c8-9a85-4891db36d12d)

Таким образом, нам удалось получить доступ к файлу `styles.css`.

![{AF3743D2-339D-4E49-BD26-961E2EBF4E45}](https://github.com/user-attachments/assets/49e6d92f-d357-492c-a045-b945c61e43e5)


### nmap
Также мы решили воспользоваться сканером уязвимостей nmap.
Используя специальные скрипты http-vuln*, нам удалось выяснить, что веб-сервер уязвим к атакам типа DDOS.

![{3707542C-5448-4AB6-883D-ED8F7FB8ACA7}](https://github.com/user-attachments/assets/5b08a76c-debc-4ca3-bd18-1a6fbe6e738f)

Также была осуществлена проверка на наличие заголовков безопасности. Можно увидеть, что на сервере не настроен заголовок Strict-Transport-Security. Его отсутствие может позволить злоумышленнику воспользоваться атакой MiTM, даже при настроенном в nginx перенаправлении на HTTPS. Браузер может попытаться подключиться к сайту по HTTP — в этот момент атакующий может перехватить трафик, и, например, подменить сертификаты.

![{797ADF58-29E5-4C68-8981-67600C8AEC36}](https://github.com/user-attachments/assets/919c3db2-247d-485b-9980-8dc640d62a67)


